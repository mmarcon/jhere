(function(e){function m(e){var t=e.target,n=t[e.type];y(n)&&n.call(this.element,g(e,t.coordinate))}function g(t,n){return e.Event(t.type,{originalEvent:t,geo:{latitude:n.latitude,longitude:n.longitude},target:t.target})}function y(e){return typeof e=="function"}var t,n,r,i,s,o={text:"",textColor:"#333333",fill:"#ff6347",stroke:"#333333",shape:"balloon",icon:undefined,group:"_"},u=e.proxy,a="mouse",f="click",l="drag",c="touch",h="start",p="end",d="move",v=[f,"dbl"+f,a+"up",a+"down",a+d,a+"over",a+"out",a+"enter",a+"leave","longpress",l+h,l,l+p,"resize",c+h,c+p,c+d];n=function(n,r){var i={},s=u(m,this),a=this._mc,f="Marker",l,c;this.groups=this.groups||{},c=this.groups,t=t||nokia.maps,e.each(v,function(e,t){i[t]=[s,!1,null]}),r=e.extend({},o,r),r.textPen=r.textPen||{strokeColor:r.textColor},r.pen=r.pen||{strokeColor:r.stroke},r.brush=r.brush||{color:r.fill},r.eventListener=i,r.icon||(f="Standard"+f),l=new t.map[f](n,r),c[r.group]=c[r.group]||[],c[r.group].visible=c[r.group].length===0?!0:c[r.group].visible,c[r.group].push(l),c[r.group].visible&&a.objects.add(l)},i=function(t,n){var r=this._mc,i=r.objects,s;this.groups=this.groups||{},s=this.groups,t=t instanceof Array?t:[t],e.each(t,function(e,t){n?i.addAll(s[t]||[]):i.removeAll(s[t]||[]),s[t].visible=!!n})},r=function(){this._mc.objects.clear(),this.groups={}},s=function(e){if(this._mc.objects.getLength()>1){var t=this._mc.getBoundingBox();this.map.zoomTo(t,e||!1)}},e.jHERE.extend("marker",n),e.jHERE.extend("markergroups",i),e.jHERE.extend("nomarkers",r),e.jHERE.extend("zoomToMarkers",s)})(jQuery);